{"ast":null,"code":"import _defineProperty from\"/home/johnadeniran/Documents/Projects/Mentor-Management-System-Team-3/frontend/mms-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/johnadeniran/Documents/Projects/Mentor-Management-System-Team-3/frontend/mms-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/johnadeniran/Documents/Projects/Mentor-Management-System-Team-3/frontend/mms-Admin/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/johnadeniran/Documents/Projects/Mentor-Management-System-Team-3/frontend/mms-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk,createSelector,createSlice}from\"@reduxjs/toolkit\";import{useAppSelector}from\"../Store\";import{fetchNotificationsApiAsync,updateAllNotificationsApiAsync,updateNotificationItemApiAsync}from\"../../axios/api-services/notifications\";import{selectCurrentUserNameSelector}from\"./current-user-slice\";function getEmptyNotification(){return{userId:\"\",allNotificationsEmail:true,programsEmail:true,tasksEmail:false,approvalRequestsEmail:true,reportsEmail:false,commentsOnMyPostsEmail:true,postsEmail:true,commentsEmail:false,mentionsEmail:true,directMessagesEmail:false,allNotificationsInApp:true,programsInApp:false,tasksInApp:true,approvalRequestsInApp:true,reportsInApp:true,commentsOnMyPostsInApp:false,postsInApp:true,commentsInApp:false,mentionsInApp:true,directMessagesInApp:true};}var initialState={notification:getEmptyNotification()};export var updateNotificationItem=createAsyncThunk(\"current-notification/change-notification-item\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(notificationDetails,thunkAPI){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return updateNotificationItemApiAsync(notificationDetails);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var updateAllNotifications=createAsyncThunk(\"current-notification/update-all-notifications\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(notificationDetails,thunkAPI){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateAllNotificationsApiAsync(notificationDetails);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var fetchNotifications=createAsyncThunk(\"current-notification/fetch-all-notifications\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(thunkAPI){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetchNotificationsApiAsync(useAppSelector(selectCurrentUserNameSelector),getEmptyNotification());case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}},_callee3);}));return function(_x5){return _ref3.apply(this,arguments);};}());export var NotificationSlice=createSlice({name:\"current-notification\",initialState:initialState,reducers:{updateAllNotificationsAction:function updateAllNotificationsAction(state,action){state.notification=action.payload;},updateNotificationItemAction:function updateNotificationItemAction(state,action){var obj=action.payload;obj=_objectSpread(_objectSpread({},obj),{},_defineProperty({},action.payload.key,action.payload.value));state.notification=obj;return state;}},extraReducers:function extraReducers(builder){builder.addCase(updateNotificationItem.fulfilled,function(state,action){var obj=action.payload;obj=_objectSpread(_objectSpread({},obj),{},_defineProperty({},action.payload.key,action.payload.value));state.notification=obj;return state;});builder.addCase(updateAllNotifications.fulfilled,function(state,action){state.notification=action.payload;});builder.addCase(fetchNotifications.fulfilled,function(state,action){state.notification=action.payload;});}});var selectSelf=function selectSelf(state){return state.notification;};export var selectCurrentNotification=createSelector([selectSelf],function(notification){return notification.notification;});export var searchNotificationByKey=createSelector([selectSelf,function(selectSelf,searchText){return searchText;}],function(selectSelf,search){return Object.entries(selectSelf.notification).filter(function(c){return c[1];});});export default NotificationSlice.reducer;var _NotificationSlice$ac=NotificationSlice.actions,updateAllNotificationsAction=_NotificationSlice$ac.updateAllNotificationsAction,updateNotificationItemAction=_NotificationSlice$ac.updateNotificationItemAction;export{updateAllNotificationsAction,updateNotificationItemAction};","map":{"version":3,"names":["createAsyncThunk","createSelector","createSlice","useAppSelector","fetchNotificationsApiAsync","updateAllNotificationsApiAsync","updateNotificationItemApiAsync","selectCurrentUserNameSelector","getEmptyNotification","userId","allNotificationsEmail","programsEmail","tasksEmail","approvalRequestsEmail","reportsEmail","commentsOnMyPostsEmail","postsEmail","commentsEmail","mentionsEmail","directMessagesEmail","allNotificationsInApp","programsInApp","tasksInApp","approvalRequestsInApp","reportsInApp","commentsOnMyPostsInApp","postsInApp","commentsInApp","mentionsInApp","directMessagesInApp","initialState","notification","updateNotificationItem","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","notificationDetails","thunkAPI","wrap","_callee$","_context","prev","next","abrupt","sent","stop","_x","_x2","apply","arguments","updateAllNotifications","_ref2","_callee2","_callee2$","_context2","_x3","_x4","fetchNotifications","_ref3","_callee3","_callee3$","_context3","_x5","NotificationSlice","name","reducers","updateAllNotificationsAction","state","action","payload","updateNotificationItemAction","obj","_objectSpread","_defineProperty","key","value","extraReducers","builder","addCase","fulfilled","selectSelf","selectCurrentNotification","searchNotificationByKey","searchText","search","Object","entries","filter","c","reducer","_NotificationSlice$ac","actions"],"sources":["/home/johnadeniran/Documents/Projects/Mentor-Management-System-Team-3/frontend/mms-Admin/src/services/redux/slices/notification-slice.ts"],"sourcesContent":["import {\n  createAsyncThunk,\n  createSelector,\n  createSlice,\n  PayloadAction,\n} from \"@reduxjs/toolkit\";\nimport { RootState, useAppSelector } from \"../Store\";\nimport { Notification } from \"../types/notification\";\nimport {\n  fetchNotificationsApiAsync,\n  updateAllNotificationsApiAsync,\n  updateNotificationItemApiAsync,\n} from \"../../axios/api-services/notifications\";\nimport { selectCurrentUserNameSelector } from \"./current-user-slice\";\n\ninterface CurrentNotificationState {\n  notification: Notification;\n}\n\nfunction getEmptyNotification(): Notification {\n  return {\n    userId: \"\",\n    allNotificationsEmail: true,\n    programsEmail: true,\n    tasksEmail: false,\n    approvalRequestsEmail: true,\n    reportsEmail: false,\n    commentsOnMyPostsEmail: true,\n    postsEmail: true,\n    commentsEmail: false,\n    mentionsEmail: true,\n    directMessagesEmail: false,\n    allNotificationsInApp: true,\n    programsInApp: false,\n    tasksInApp: true,\n    approvalRequestsInApp: true,\n    reportsInApp: true,\n    commentsOnMyPostsInApp: false,\n    postsInApp: true,\n    commentsInApp: false,\n    mentionsInApp: true,\n    directMessagesInApp: true,\n  };\n}\n\nconst initialState: CurrentNotificationState = {\n  notification: getEmptyNotification(),\n};\n\nexport const updateNotificationItem = createAsyncThunk(\n  \"current-notification/change-notification-item\",\n  async (\n    notificationDetails: { key: string; value: boolean; obj: Notification },\n    thunkAPI\n  ) => {\n    return await updateNotificationItemApiAsync(notificationDetails);\n  }\n);\n\nexport const updateAllNotifications = createAsyncThunk(\n  \"current-notification/update-all-notifications\",\n  async (notificationDetails: Notification, thunkAPI) => {\n    return await updateAllNotificationsApiAsync(notificationDetails);\n  }\n);\n\nexport const fetchNotifications = createAsyncThunk(\n  \"current-notification/fetch-all-notifications\",\n  async (thunkAPI) => {\n    return await fetchNotificationsApiAsync(\n      useAppSelector(selectCurrentUserNameSelector),\n      getEmptyNotification()\n    );\n  }\n);\n\nexport const NotificationSlice = createSlice({\n  name: \"current-notification\",\n  initialState,\n  reducers: {\n    updateAllNotificationsAction: (\n      state,\n      action: PayloadAction<Notification>\n    ) => {\n      state.notification = action.payload;\n    },\n    updateNotificationItemAction: (state, action: PayloadAction<any>) => {\n      let obj: any = action.payload;\n      obj = { ...obj, [action.payload.key]: action.payload.value };\n      state.notification = obj;\n      return state;\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(updateNotificationItem.fulfilled, (state, action) => {\n      let obj: any = action.payload;\n      obj = { ...obj, [action.payload.key]: action.payload.value };\n      state.notification = obj;\n      return state;\n    });\n\n    builder.addCase(updateAllNotifications.fulfilled, (state, action) => {\n      state.notification = action.payload;\n    });\n\n    builder.addCase(fetchNotifications.fulfilled, (state, action) => {\n      state.notification = action.payload;\n    });\n  },\n});\n\nconst selectSelf = (state: RootState) => state.notification;\n\nexport const selectCurrentNotification = createSelector(\n  [selectSelf],\n  (notification): Notification => notification.notification\n);\n\nexport const searchNotificationByKey = createSelector(\n  [selectSelf, (selectSelf, searchText: string) => searchText],\n  (selectSelf, search: string) => {\n    return Object.entries(selectSelf.notification).filter((c) => c[1]);\n  }\n);\n\nexport default NotificationSlice.reducer;\nexport const { updateAllNotificationsAction, updateNotificationItemAction } =\n  NotificationSlice.actions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
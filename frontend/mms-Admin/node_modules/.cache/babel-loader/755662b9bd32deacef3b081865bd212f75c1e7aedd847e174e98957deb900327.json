{"ast":null,"code":"import _regeneratorRuntime from\"/home/johnadeniran/Documents/Projects/Mentor-Management-System-Team-3/frontend/mms-Admin/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/johnadeniran/Documents/Projects/Mentor-Management-System-Team-3/frontend/mms-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk,createSelector,createSlice}from\"@reduxjs/toolkit\";import\"./../../../assets/images/flag-icons-main/flags/4x3/ac.svg\";import{loginCurrentUserApiAsync,updateCurrentUserApiAsync,updateCurrentUserProfilePictureApiAsync}from\"../../axios/api-services/current-user\";var getEmptyLoggedInUser=function getEmptyLoggedInUser(){return{user:{},userToken:undefined,loginTime:undefined};};var initialState={currentUser:getEmptyLoggedInUser()};export var updateCurrentUser=createAsyncThunk(\"current-user/update-user\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userDetails,thunkAPI){var state;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:state=thunkAPI.getState();_context.next=3;return updateCurrentUserApiAsync(userDetails,state.currentUser.currentUser.userToken);case 3:return _context.abrupt(\"return\",_context.sent);case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var updateCurrentUserProfilePicture=createAsyncThunk(\"current-user/update-user-profile-image\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(image,thunkAPI){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateCurrentUserProfilePictureApiAsync(image);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var loginCurrentUser=createAsyncThunk(\"current-user/login\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(userDetails,thunkAPI){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return loginCurrentUserApiAsync(userDetails);case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var CurrentUserSlice=createSlice({name:\"current-user\",initialState:initialState,reducers:{updateLoggedInCurrentUser:function updateLoggedInCurrentUser(state,action){var user=state===null||state===void 0?void 0:state.currentUser;user.user=action.payload;user.loginTime=new Date().getTime();return state;},updateLoggedInUserCountryFlag:function updateLoggedInUserCountryFlag(state,action){var user=state===null||state===void 0?void 0:state.currentUser;user.user.countryFlagIcon=action.payload;return state;},updateLoggedInUserProfilePicture:function updateLoggedInUserProfilePicture(state,action){var user=state===null||state===void 0?void 0:state.currentUser;user.user.userImage=action.payload;return state;},updateLoggedInUserToken:function updateLoggedInUserToken(state,action){var user=state===null||state===void 0?void 0:state.currentUser;user.userToken=action.payload;return state;},logoutCurrentUser:function logoutCurrentUser(state){state.currentUser=getEmptyLoggedInUser();return state;}},extraReducers:function extraReducers(builder){builder.addCase(loginCurrentUser.fulfilled,function(state,action){state.currentUser=action.payload;state.currentUser.loginTime=new Date().getTime();});builder.addCase(updateCurrentUser.fulfilled,function(state,action){state.currentUser.user=action.payload;});builder.addCase(updateCurrentUserProfilePicture.fulfilled,function(state,action){state.currentUser.user.userImage=action.payload;console.log(\"update image recieved mmmm\",action.payload);});}});var selectSelf=function selectSelf(state){return state.currentUser;};export var selectCurrentUser=createSelector([selectSelf],function(user){return user.currentUser.user;});export var selectCurrentUserProfilePicture=createSelector([selectSelf],function(user){return user.currentUser.user.userImage;});export var selectCurrentUserFlag=createSelector([selectSelf],function(user){return user.currentUser.user.countryFlagIcon;});export var selectCurrentUserToken=createSelector([selectSelf],function(user){return user.currentUser.userToken;});export var selectCurrentUserNameSelector=createSelector([selectSelf],function(user){var person=user.currentUser.user;return{userId:person.userId,email:person.email,fullName:\"{\".concat(person.firstNames,\" \").concat(person.lastName,\"}\")};});export default CurrentUserSlice.reducer;var updateLoggedInCurrentUser=CurrentUserSlice.actions.updateLoggedInCurrentUser;export{updateLoggedInCurrentUser};","map":{"version":3,"names":["createAsyncThunk","createSelector","createSlice","loginCurrentUserApiAsync","updateCurrentUserApiAsync","updateCurrentUserProfilePictureApiAsync","getEmptyLoggedInUser","user","userToken","undefined","loginTime","initialState","currentUser","updateCurrentUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userDetails","thunkAPI","state","wrap","_callee$","_context","prev","next","getState","abrupt","sent","stop","_x","_x2","apply","arguments","updateCurrentUserProfilePicture","_ref2","_callee2","image","_callee2$","_context2","_x3","_x4","loginCurrentUser","_ref3","_callee3","_callee3$","_context3","_x5","_x6","CurrentUserSlice","name","reducers","updateLoggedInCurrentUser","action","payload","Date","getTime","updateLoggedInUserCountryFlag","countryFlagIcon","updateLoggedInUserProfilePicture","userImage","updateLoggedInUserToken","logoutCurrentUser","extraReducers","builder","addCase","fulfilled","console","log","selectSelf","selectCurrentUser","selectCurrentUserProfilePicture","selectCurrentUserFlag","selectCurrentUserToken","selectCurrentUserNameSelector","person","userId","email","fullName","concat","firstNames","lastName","reducer","actions"],"sources":["/home/johnadeniran/Documents/Projects/Mentor-Management-System-Team-3/frontend/mms-Admin/src/services/redux/slices/current-user-slice.ts"],"sourcesContent":["import {\n  createAsyncThunk,\n  createSelector,\n  createSlice,\n  PayloadAction,\n} from \"@reduxjs/toolkit\";\nimport {\n  LoggedInUser,\n  NameDetails,\n  SystemUser,\n  UsernamePassword,\n} from \"../types/system-user\";\nimport { RootState } from \"../Store\";\nimport \"./../../../assets/images/flag-icons-main/flags/4x3/ac.svg\";\nimport {\n  loginCurrentUserApiAsync,\n  updateCurrentUserApiAsync,\n  updateCurrentUserProfilePictureApiAsync,\n} from \"../../axios/api-services/current-user\";\n\ninterface CurrentUserState {\n  currentUser: LoggedInUser;\n}\n\nconst getEmptyLoggedInUser = (): LoggedInUser => {\n  return { user: {}, userToken: undefined, loginTime: undefined };\n};\n\nconst initialState: CurrentUserState = {\n  currentUser: getEmptyLoggedInUser(),\n};\n\nexport const updateCurrentUser = createAsyncThunk(\n  \"current-user/update-user\",\n  async (userDetails: SystemUser, thunkAPI) => {\n    const state : any = thunkAPI.getState();\n    return await updateCurrentUserApiAsync(userDetails, state.currentUser.currentUser.userToken);\n  }\n);\n\nexport const updateCurrentUserProfilePicture = createAsyncThunk(\n  \"current-user/update-user-profile-image\",\n  async (image: any, thunkAPI) => {\n    return await updateCurrentUserProfilePictureApiAsync(image);\n  }\n);\n\nexport const loginCurrentUser = createAsyncThunk(\n  \"current-user/login\",\n  async (userDetails: UsernamePassword, thunkAPI) => {\n    return await loginCurrentUserApiAsync(userDetails);\n  }\n);\n\nexport const CurrentUserSlice = createSlice({\n  name: \"current-user\",\n  initialState,\n  reducers: {\n    updateLoggedInCurrentUser: (state, action: PayloadAction<SystemUser>) => {\n      let user = state?.currentUser;\n      user.user = action.payload;\n      user.loginTime = new Date().getTime();\n      return state;\n    },\n    updateLoggedInUserCountryFlag: (state, action: PayloadAction<any>) => {\n      let user = state?.currentUser;\n      user.user.countryFlagIcon = action.payload;\n      return state;\n    },\n    updateLoggedInUserProfilePicture: (state, action: PayloadAction<any>) => {\n      let user = state?.currentUser;\n      user.user.userImage = action.payload;\n      return state;\n    },\n    updateLoggedInUserToken: (state, action: PayloadAction<any>) => {\n      let user = state?.currentUser;\n      user.userToken = action.payload;\n      return state;\n    },\n    logoutCurrentUser: (state) => {\n      state.currentUser = getEmptyLoggedInUser();\n      return state;\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder.addCase(loginCurrentUser.fulfilled, (state, action) => {\n      state.currentUser = action.payload;\n      state.currentUser.loginTime = new Date().getTime();\n    });\n\n    builder.addCase(updateCurrentUser.fulfilled, (state, action) => {\n      state.currentUser.user = action.payload;\n    });\n\n    builder.addCase(\n      updateCurrentUserProfilePicture.fulfilled,\n      (state, action) => {\n        state.currentUser.user.userImage = action.payload;\n        console.log(\"update image recieved mmmm\", action.payload);\n      }\n    );\n  },\n});\n\nconst selectSelf = (state: RootState) => state.currentUser;\nexport const selectCurrentUser = createSelector(\n  [selectSelf],\n  (user): SystemUser => user.currentUser.user\n);\nexport const selectCurrentUserProfilePicture = createSelector(\n  [selectSelf],\n  (user): any => user.currentUser.user.userImage\n);\nexport const selectCurrentUserFlag = createSelector(\n  [selectSelf],\n  (user): any => user.currentUser.user.countryFlagIcon\n);\nexport const selectCurrentUserToken = createSelector(\n  [selectSelf],\n  (user): any => user.currentUser.userToken\n);\nexport const selectCurrentUserNameSelector = createSelector(\n  [selectSelf],\n  (user): NameDetails => {\n    var person = user.currentUser.user;\n    return {\n      userId: person.userId,\n      email: person.email,\n      fullName: `{${person.firstNames} ${person.lastName}}`,\n    };\n  }\n);\n\nexport default CurrentUserSlice.reducer;\nexport const { updateLoggedInCurrentUser } = CurrentUserSlice.actions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}